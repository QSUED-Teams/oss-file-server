{"version":3,"sources":["webpack:///static/js/app.a5c1a2726067a1d049e9.js","webpack:///./src/App.vue?0a82","webpack:///src/view/oss-upload.vue","webpack:///./src/view/oss-upload.vue","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/view/upload-index.vue","webpack:///./src/router/index.js","webpack:///./src/view/upload-index.vue?a16b","webpack:///src/view/upload-index.vue","webpack:///src/App.vue","webpack:///./src/plugins/oss-sdk.js","webpack:///./src/view/oss-upload.vue?6f4b"],"names":["webpackJsonp","+8CK","module","__webpack_exports__","__webpack_require__","render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticRenderFns","esExports","/7sk","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","n","__WEBPACK_IMPORTED_MODULE_1__plugins_oss_sdk__","data","accept","bigImgDialog","url","width","headers","files","fileOpt","clientConfig","accessKeyId","accessKeySecret","stsToken","bucket","endpoint","cname","region","mounted","fileList","map","item","methods","changeFile","e","_this","fileTemplate","isUploading","uploadState","percentage","uploadSuccess","config","action","template","cb","progressCallback","Object","then","resolve","result","filesObj","filter","name","length","res","status","console","log","address","error","removeFile","$emit","catch","_","uploadCode","$message","message","storeAs","cpt","percent","Math","round","lookBigImg","file","index","fileUrl","delFile","_this2","splice","client","err","errCode","warn","fileObj","$refs","value","downloadFile","window","open","fileReload","_this3","a","reject","uploadConfig","progressCb","target","props","type","String","Array","fileNumber","Number","watch","handler","val","immediate","37wE","exports","8jQz","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_oss_upload_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_cd8c0f14_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_oss_upload_vue__","normalizeComponent","__vue_styles__","Component","M93x","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_3d331b06_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_App_vue__","NHnr","defineProperty","__WEBPACK_IMPORTED_MODULE_1_vue__","__WEBPACK_IMPORTED_MODULE_2__App__","__WEBPACK_IMPORTED_MODULE_3__router__","__WEBPACK_IMPORTED_MODULE_4_element_ui__","__WEBPACK_IMPORTED_MODULE_4_element_ui___default","__WEBPACK_IMPORTED_MODULE_5_vue_clipboard2__","__WEBPACK_IMPORTED_MODULE_5_vue_clipboard2___default","Vue","use","ElementUI","VueClipboard","Promise","router","beforeEach","to","from","next","el","h","App","components","RTAW","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_upload_index_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_1474cbce_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_upload_index_vue__","YNhZ","YaEn","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__view_upload_index__","Router","routes","path","component","upload","hidden","gVwO","staticClass","_v","on","deleteFile","getFiles","_l","directives","rawName","getUrl","expression","arg","key","_s","click","$event","stopPropagation","_e","jUvt","__WEBPACK_IMPORTED_MODULE_0__plugins_oss_sdk__","__WEBPACK_IMPORTED_MODULE_1__oss_upload__","list","onCopy","onError","ossUpload","q9Dk","sEFh","w7Bb","multipartUploadWithSts","isNotNeedRequest","clientRequest","OSS","multitest","urllib","request","method","response","errmsg","JSON","parse","AccessKeyId","AccessKeySecret","SecurityToken","ossClient","multitestConfig","checkpoint_temp","multipartUpload","parallel","checkpoint","progress","_x","_x2","_x3","_ref","apply","arguments","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default","mark","_callee","wrap","_context","prev","stop","errObj","undefined","_x4","_x5","_ref2","_callee2","_context2","constructor","Function","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default","dataTransfer","fileName","fileType","indexOf","hasFile","notNeedClientRequest","warning","getImgUrl","push","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","len","i","reader","FileReader","readAsDataURL","onload","Image","src","getExtranetUrl","signatureUrl","getObjectUrl","delete","errContent","d","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__","require","zAEU","_m","ref","change","stroke-width","alt","title","staticStyle","text-align","visible","center","update:visible"],"mappings":"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","file":"static/js/app.a5c1a2726067a1d049e9.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"+8CK\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"/7sk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(\"rVsN\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__plugins_oss_sdk__ = __webpack_require__(\"w7Bb\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      accept: '',\n      bigImgDialog: false,\n      url: '',\n      width: 126,\n      headers: {},\n      files: [],\n      fileOpt: '',\n      clientConfig: { //OSS上传配置项信息（可选），当isNotNeedRequest为true时必填项\n        accessKeyId: '', //通过阿里云控制台创建的access key\n        accessKeySecret: '', //通过阿里云控制台创建的access secret。\n        stsToken: '', //使用临时授权方式。\n        bucket: '', // 通过控制台创建的bucket。\n        endpoint: '', //OSS域名。\n        cname: true, //是否支持上传自定义域名，默认false。如果cname为true，endpoint传入自定义域名时，自定义域名需要先同bucket进行绑定。\n        region: 'oss-cn-hangzhou' //bucket 所在的区域，默认 oss-cn-hangzhou（是根据当前所在区域自动确认的）。\n      }\n    };\n  },\n  mounted: function mounted() {\n    if (this.fileList) {\n      this.files = this.fileList.map(function (item) {\n        return item;\n      });\n    }\n  },\n\n  methods: {\n    changeFile: function changeFile(e) {\n      var _this = this;\n\n      var fileTemplate = {\n        isUploading: false, //文件是否正在上传\n        uploadState: 0, //文件状态 0初始状态 1上传中 2上传失败 3上传成功\n        percentage: 0, //该文件的上传进度\n        uploadSuccess: false, //该文件是否上传成功\n        fileOpt: '' //该文件的上传进度节点，上传失败时可以使用继续上传\n      }; //每一个文件包含的其他字段（可选）\n      var config = {\n        action: this.action, //获取取配置信息接口请求地址，当isNotNeedRequest为false时必传。\n        fileList: this.files, //文件列表\n        template: fileTemplate, //文件添加时的其他默认值，可自定义需要的字段\n        cb: this.progressCallback //上传进度回调函数\n        // fileNumber: this.fileNumber,//文件限制数量 不传或者传非为不限制数量\n        // isNotNeedRequest: false,//默认为false，即需要请求接口获取配置信息，不需要时，请设置为true。\n        // clientRequest: this.clientConfig,//当isNotNeedRequest为true时必填项，配置项详情请查看OSS上传的配置项文档。https://help.aliyun.com/\n      }; //配置项\n      Object(__WEBPACK_IMPORTED_MODULE_1__plugins_oss_sdk__[\"d\" /* upload */])(e, config).then(function (resolve) {\n        var result = resolve.data,\n            fileList = resolve.fileList;\n        // console.log(result, this.files);\n        var filesObj = fileList.filter(function (item) {\n          return item.name === result.name;\n        });\n        if (filesObj.length) {\n          filesObj = filesObj[0];\n          filesObj.isUploading = false;\n          if (result.res.status === 200) {\n            console.log(result);\n            filesObj.uploadSuccess = true;\n            filesObj.uploadState = 3;\n            filesObj.address = Object(__WEBPACK_IMPORTED_MODULE_1__plugins_oss_sdk__[\"b\" /* getExtranetUrl */])(result.name, 1); //获取图片外网访问地址\n          } else {\n            filesObj.uploadState = 2;\n            console.error(result);\n          }\n        }\n        _this.removeFile(); //移除选择文件的选中状态，可以继续选择文件\n        _this.$emit('upload', _this.files); //传出所有的文件\n      }).catch(function (_) {\n        _this.removeFile();\n        if (_.uploadCode === 0) {\n          _this.$message.error(_.message);\n          return;\n        } else {\n          console.error(_);\n        }\n        var filesObj = _this.files.filter(function (item) {\n          return item.name === _.storeAs;\n        });\n        if (filesObj.length) {\n          filesObj = filesObj[0];\n          filesObj.uploadState = 2;\n          if (_.cpt) {\n            filesObj.fileOpt = _.cpt;\n          }\n        }\n      });\n    },\n    progressCallback: function progressCallback(percent, storeAs, cpt) {\n      //参数说明：当前上传进度的  当前上传的文件名  当前上传节点（进行重新上传时使用）\n      console.log(percent, storeAs);\n      var filesObj = this.files.filter(function (item) {\n        return item.name === storeAs;\n      });\n      if (filesObj.length) {\n        filesObj = filesObj[0];\n        filesObj.isUploading = true;\n        filesObj.uploadState = 1;\n        filesObj.percentage = Math.round(percent * 10000) / 100;\n      }\n    },\n    lookBigImg: function lookBigImg(file, index) {\n      //查看图片大图\n      this.url = file.fileUrl;\n      this.bigImgDialog = true;\n    },\n    delFile: function delFile(file, index) {\n      var _this2 = this;\n\n      //删除OSS服务器上的文件\n      Object(__WEBPACK_IMPORTED_MODULE_1__plugins_oss_sdk__[\"a\" /* deleteFile */])(file.name).then(function (res) {\n        _this2.files.splice(index, 1);\n        _this2.removeFile(); //移除选择文件的选中状态，可以继续选择文件\n        _this2.$emit('deleteFile', _this2.files, _this2.client);\n      }).catch(function (err) {\n        if (err.errCode === 999) {\n          //该状态为文件没有上传成功，可以直接在本地删除\n          _this2.files.splice(index, 1);\n          console.warn(err);\n        } else {\n          console.error(err);\n        }\n        _this2.$emit('deleteFile', _this2.files, _this2.client);\n      });\n    },\n    removeFile: function removeFile() {\n      //移除选择文件的选中状态，可以继续选择文件\n      var fileObj = this.$refs['file'];\n      if (fileObj) {\n        fileObj.value = '';\n      }\n    },\n    downloadFile: function downloadFile(name) {\n      //下载文件\n      var url = void 0;\n      if (this.client) {\n        url = Object(__WEBPACK_IMPORTED_MODULE_1__plugins_oss_sdk__[\"b\" /* getExtranetUrl */])(name, 1); //获取图片外网访问地址\n        window.open(url, name);\n      } else {\n        this.$message.error('获取下载地址失败！');\n      }\n    },\n    fileReload: function fileReload(item, index) {\n      var _this3 = this;\n\n      new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n        var uploadConfig = {\n          action: _this3.action, //请求地址\n          resolve: resolve, //Promise(成功的返回)\n          reject: reject, // Promise(失败的返回)\n          progressCb: _this3.progressCallback //上传进度回调函数\n          // isNotNeedRequest: false,//默认为false，即需要请求接口获取配置信息，不需要时，请设置为true。\n          // clientRequest: this.clientConfig,//当isNotNeedRequest为true时必填项，配置项详情请查看OSS上传的配置项文档。https://help.aliyun.com/\n        };\n        item.fileOpt && (uploadConfig.cpt = item.fileOpt); //如果该文件有上传进度节点，则重新上传。\n        Object(__WEBPACK_IMPORTED_MODULE_1__plugins_oss_sdk__[\"c\" /* multipartUploadWithSts */])(item.name, item.target, uploadConfig); //参数说明：文件名；文件；配置对象\n      }).then(function (res) {\n        console.log(res);\n      }).catch(function (_) {\n        console.log(_);\n        _this3.removeFile();\n        var filesObj = _this3.files.filter(function (item) {\n          return item.name === _.storeAs;\n        });\n        if (filesObj.length) {\n          filesObj = filesObj[0];\n          filesObj.uploadState = 2;\n          if (_.cpt) {\n            filesObj.fileOpt = _.cpt;\n          }\n        }\n      });\n    }\n  },\n  props: {\n    action: {\n      type: String\n    },\n    fileList: {\n      type: Array\n    },\n    fileNumber: {\n      type: Number\n    }\n  },\n  watch: {\n    fileList: {\n      handler: function handler(val) {\n        if (val) {\n          this.files = val.map(function (item) {\n            return item;\n          });\n        }\n      },\n\n      immediate: true\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"37wE\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"8jQz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_oss_upload_vue__ = __webpack_require__(\"/7sk\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_cd8c0f14_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_oss_upload_vue__ = __webpack_require__(\"zAEU\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"YNhZ\")\n}\nvar normalizeComponent = __webpack_require__(\"C7Lr\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cd8c0f14\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_oss_upload_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_cd8c0f14_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_oss_upload_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"sEFh\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_3d331b06_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"+8CK\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"37wE\")\n}\nvar normalizeComponent = __webpack_require__(\"C7Lr\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_3d331b06_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(\"rVsN\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(\"83B7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__App__ = __webpack_require__(\"M93x\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__router__ = __webpack_require__(\"YaEn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_element_ui__ = __webpack_require__(\"Ip9M\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_element_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_element_ui__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vue_clipboard2__ = __webpack_require__(\"KPKd\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vue_clipboard2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_vue_clipboard2__);\n\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_4_element_ui___default.a);\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_5_vue_clipboard2___default.a);\nwindow.Promise = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a;\n\n__WEBPACK_IMPORTED_MODULE_3__router__[\"a\" /* default */].beforeEach(function (to, from, next) {\n  next();\n});\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_1_vue__[\"default\"]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_3__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_2__App__[\"a\" /* default */]);\n  },\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_2__App__[\"a\" /* default */] }\n\n});\n\n/***/ }),\n\n/***/ \"RTAW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_upload_index_vue__ = __webpack_require__(\"jUvt\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_1474cbce_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_upload_index_vue__ = __webpack_require__(\"gVwO\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"q9Dk\")\n}\nvar normalizeComponent = __webpack_require__(\"C7Lr\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1474cbce\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_upload_index_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_1474cbce_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_upload_index_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"YNhZ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"YaEn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"83B7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(\"KGCO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__view_upload_index__ = __webpack_require__(\"RTAW\");\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'upload',\n    component: __WEBPACK_IMPORTED_MODULE_2__view_upload_index__[\"a\" /* default */],\n    hidden: true\n  }]\n}));\n\n/***/ }),\n\n/***/ \"gVwO\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"图片上传：\")]),_vm._v(\" \"),_c('oss-upload',{attrs:{\"action\":\"http://192.168.0.154:7080/\"},on:{\"deleteFile\":_vm.getFiles,\"upload\":_vm.getFiles}}),_vm._v(\" \"),_c('ul',{staticClass:\"info\"},_vm._l((_vm.files),function(item,index){return (item.address)?_c('li',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(_vm.getUrl(item.name,1)),expression:\"getUrl(item.name,1)\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:(_vm.onCopy),expression:\"onCopy\",arg:\"success\"},{name:\"clipboard\",rawName:\"v-clipboard:error\",value:(_vm.onError),expression:\"onError\",arg:\"error\"}],key:index,staticClass:\"info-item\"},[_c('span',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-download\",on:{\"click\":function($event){$event.stopPropagation();return _vm.downloadFile(item.name)}}})]):_vm._e()}),0)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"jUvt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugins_oss_sdk__ = __webpack_require__(\"w7Bb\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__oss_upload__ = __webpack_require__(\"8jQz\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      files: [],\n      client: ''\n    };\n  },\n  mounted: function mounted() {},\n\n  methods: {\n    getFiles: function getFiles(list, client) {\n      this.client = client ? client : '';\n      this.files = list ? list : [];\n    },\n    onCopy: function onCopy(e) {\n      this.$message({\n        message: '复制成功',\n        type: 'success'\n      });\n    },\n    onError: function onError(e) {\n      this.$message.error('复制失败');\n    },\n    getUrl: function getUrl(name, type) {\n      return Object(__WEBPACK_IMPORTED_MODULE_0__plugins_oss_sdk__[\"b\" /* getExtranetUrl */])(name, type);\n    },\n    downloadFile: function downloadFile(name) {\n      //下载文件\n      var url = void 0;\n      if (name) {\n        url = Object(__WEBPACK_IMPORTED_MODULE_0__plugins_oss_sdk__[\"b\" /* getExtranetUrl */])(name, 1);\n        window.open(url, name);\n      } else {\n        this.$message.error('获取下载地址失败！');\n      }\n      // return url;\n    }\n  },\n  components: {\n    ossUpload: __WEBPACK_IMPORTED_MODULE_1__oss_upload__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"q9Dk\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"sEFh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n\n/***/ \"w7Bb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return upload; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getExtranetUrl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return multipartUploadWithSts; });\n/* unused harmony export multitest */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return deleteFile; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(\"aA9S\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__ = __webpack_require__(\"lC5x\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(\"J0Oq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__ = __webpack_require__(\"rVsN\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__);\n\n\n\n\nvar OSS = __webpack_require__(\"SEXl\");\nvar files = [];\nvar client = '',\n    fileName = '';\nvar isNotNeedRequest = false;\nvar notNeedClientRequest = '';\nwindow.Promise = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a;\n\n//获取OSS上传必须的秘钥及其他设置信息 （注意：如果拥有上传必备的秘钥以及其他配置信息，可以跳过本操作）\nfunction multipartUploadWithSts(storeAs, file, uploadConfig) {\n  //参数说明：文件名；文件；配置对象\n  var action = uploadConfig.action; //请求地址\n  if (uploadConfig.isNotNeedRequest && uploadConfig.clientRequest) {\n    try {\n      client = new OSS(uploadConfig.clientRequest); //初始化OSS对象\n      multitest(client, storeAs, file, uploadConfig); //使用OSS上传文件\n    } catch (e) {\n      uploadConfig.reject({ err: e, storeAs: storeAs });\n    }\n    return;\n  } else if (!action) {\n    uploadConfig.reject({\n      uploadCode: 0,\n      message: '\\u5982\\u679C\\u8981\\u8BF7\\u6C42\\u83B7\\u53D6\\u914D\\u7F6E\\u63A5\\u53E3\\uFF0C\\u8BF7\\u7ED9\\u5B9A\\u63A5\\u53E3\\u5730\\u5740\\uFF01',\n      storeAs: storeAs\n    });\n  }\n  OSS.urllib.request(action, {\n    method: 'GET'\n  }, function (err, response) {\n    var result = void 0,\n        errmsg = void 0;\n    if (err) {\n      uploadConfig.reject({ err: err, storeAs: storeAs });\n      return console.error(err);\n    }\n    try {\n      result = JSON.parse(response);\n    } catch (e) {\n      errmsg = 'parse sts response info error: ' + e.message;\n      uploadConfig.reject({ err: e, storeAs: storeAs });\n      return console.error(errmsg);\n    }\n    var clientRequest = {\n      accessKeyId: result.AccessKeyId, //通过阿里云控制台创建的access key\n      accessKeySecret: result.AccessKeySecret, //通过阿里云控制台创建的access secret。\n      stsToken: result.SecurityToken, //使用临时授权方式。\n      bucket: 'park-static', // 通过控制台创建的bucket。\n      endpoint: 'oss.zhihuipk.com', //OSS域名。\n      cname: true,\n      region: 'oss-cn-hangzhou'\n    };\n    //上传前的准备\n    try {\n      client = new OSS(clientRequest); //初始化OSS对象\n      multitest(client, storeAs, file, uploadConfig); //使用OSS上传文件\n    } catch (e) {\n      uploadConfig.reject({ err: e, storeAs: storeAs });\n    }\n  });\n}\n\n//使用OSS上传文件\nfunction multitest(ossClient, storeAs, file, multitestConfig) {\n  //参数说明：oss对象；文件名；文件；配置对象\n  var checkpoint_temp = void 0,\n      //当前节点（重新上传时需要）\n  cpt = multitestConfig.cpt,\n      //上一个节点（重新上传时需要）\n  progressCb = multitestConfig.progressCb; //上传进度回调函数\n  if (cpt) {\n    //如果有断点则继续上一个节点上传该文件\n    console.log(\"multitest with cpt\", cpt);\n    ossClient.multipartUpload(storeAs, file, {\n      parallel: 2,\n      checkpoint: cpt,\n      //进度回调函数\n      progress: function () {\n        var _ref = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee(percent, storeAs, cpt) {\n          return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  //参数说明：当前上传进度的；当前上传的文件名；当前上传节点（进行重新上传时使用）\n                  progressCb && progressCb(percent, storeAs, cpt);\n                  checkpoint_temp = cpt;\n\n                case 2:\n                case 'end':\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function progress(_x, _x2, _x3) {\n          return _ref.apply(this, arguments);\n        }\n\n        return progress;\n      }()\n    }).then(function (result) {\n      //成功的返回\n      multitestConfig.resolve({\n        data: result,\n        fileList: files\n      });\n    }).catch(function (err) {\n      //失败的返回\n      var errObj = { err: err, storeAs: storeAs };\n      checkpoint_temp !== undefined && checkpoint_temp !== null && (errObj.cpt = checkpoint_temp);\n      multitestConfig.reject(errObj); //将当前节点返回，使其可以重新从该节点继续上传文件\n    });\n  } else {\n    console.log(\"multitest without cpt\");\n    ossClient.multipartUpload(storeAs, file, {\n      parallel: 2,\n      //进度回调函数\n      progress: function () {\n        var _ref2 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.mark(function _callee2(percent, cpt) {\n          return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  //参数说明：当前上传进度的；当前上传的文件名；当前上传节点（进行重新上传时使用）\n                  progressCb && progressCb(percent, storeAs, cpt);\n                  checkpoint_temp = cpt;\n\n                case 2:\n                case 'end':\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function progress(_x4, _x5) {\n          return _ref2.apply(this, arguments);\n        }\n\n        return progress;\n      }()\n    }).then(function (result) {\n      //成功的返回\n      multitestConfig.resolve({\n        data: result,\n        fileList: files\n      });\n    }).catch(function (err) {\n      //失败的返回\n      var errObj = { err: err, storeAs: storeAs };\n      checkpoint_temp !== undefined && checkpoint_temp !== null && (errObj.cpt = checkpoint_temp);\n      multitestConfig.reject(errObj); //将当前节点返回，使其可以重新从该节点继续上传文件\n    });\n  }\n}\n\n//获取选中的文件\nfunction upload(e, config) {\n  files = config.fileList ? config.fileList : []; //当前文件列表\n  var fileNumber = config.fileNumber,\n      //文件限制数量\n  action = config.action,\n      //请求地址\n  template = config.template,\n      //文件添加时的其他默认值\n  cb = config.cb; //文件上传时的回调函数\n  isNotNeedRequest = !!config.isNotNeedRequest; //默认为false，即需要请求接口获取配置信息，不需要时，请设置为true。\n  var fileTemplate = template && template.constructor === Object ? template : {},\n      progressCb = cb && cb.constructor === Function ? cb : '';\n  return new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    var target = e.target.files || e.dataTransfer.files;\n    var file = target[0]; //文件\n    var storeAs = file.name; //文件名\n    fileName = storeAs; //文件名\n    var fileType = ['image/png', 'image/jpeg ', 'image/jpg', 'image/gif'].indexOf(file.type) > -1; //获取文件类型\n    var hasFile = files.filter(function (item) {\n      return item.name === storeAs;\n    }); //查找该文件\n    if (isNotNeedRequest) {\n      notNeedClientRequest = config.clientRequest; //获取OSS上传配置项\n      if (!notNeedClientRequest) {\n        reject({\n          uploadCode: 0,\n          message: '\\u5982\\u679C\\u4E0D\\u9700\\u8981\\u8BF7\\u6C42\\u83B7\\u53D6\\u914D\\u7F6E\\u63A5\\u53E3\\uFF0C\\u8BF7\\u7ED9\\u5B9A\\u89C4\\u8303\\u7684\\u914D\\u7F6E\\u5BF9\\u8C61\\uFF01\\u8BE6\\u60C5\\u8BF7\\u67E5\\u770BOSS\\u6587\\u6863'\n        });\n        return;\n      }\n    }\n    if (fileNumber && fileNumber <= files.length) {\n      //文件限制数量\n      reject({\n        uploadCode: 0,\n        message: '\\u6700\\u5927\\u4E0A\\u4F20' + fileNumber + '\\u4E2A\\u6587\\u4EF6\\uFF01'\n      });\n      return;\n    }\n    if (hasFile.length) {\n      //如果本次已经上传了该文件则提示\n      reject({\n        uploadCode: 0,\n        message: '该文件已经上传过了'\n      });\n      console.warning('该文件已经上传过了');\n    } else {\n      //上传配置项\n      var uploadConfig = {\n        action: action, //请求地址\n        resolve: resolve, //Promise(成功的返回)\n        reject: reject, // Promise(失败的返回)\n        progressCb: progressCb //上传进度回调函数\n      };\n      if (fileType) {\n        //如果该文件是图片格式，则使先转换成base64\n        getImgUrl(target).then(function (res) {\n          if (fileNumber === 1) {\n            config.fileList ? config.fileList = [] : files = [];\n          }\n          files.push(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(fileTemplate, {\n            target: target[0], //文件\n            name: storeAs, //文件名\n            type: 1, //文件格式为图片\n            fileUrl: res, //该文件的图片base64\n            address: '' //该文件的OSS地址\n          }));\n          //是否请求接口获取配置信息\n          if (isNotNeedRequest) {\n            try {\n              client = new OSS(notNeedClientRequest); //初始化OSS对象\n              multitest(client, storeAs, file, uploadConfig); //使用OSS上传文件\n            } catch (e) {\n              uploadConfig.reject({ err: e, storeAs: storeAs });\n            }\n          } else {\n            multipartUploadWithSts(storeAs, file, uploadConfig); //获取OSS上传必须的秘钥及其他设置信息\n          }\n        });\n      } else {\n        if (fileNumber === 1) {\n          config.fileList ? config.fileList = [] : files = [];\n        }\n        files.push(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(fileTemplate, {\n          target: target[0], //文件\n          name: storeAs, //文件名\n          type: 0, //文件格式为其他类型的文件\n          address: '' //该文件的OSS地址\n        }));\n        //是否请求接口获取配置信息\n        if (isNotNeedRequest) {\n          try {\n            client = new OSS(notNeedClientRequest); //初始化OSS对象\n            multitest(client, storeAs, file, uploadConfig); //使用OSS上传文件\n          } catch (e) {\n            uploadConfig.reject({ err: e, storeAs: storeAs });\n          }\n        } else {\n          multipartUploadWithSts(storeAs, file, uploadConfig); //获取OSS上传必须的秘钥及其他设置信息\n        }\n      }\n    }\n  });\n}\n\n//获取图片base64\nfunction getImgUrl(files) {\n  return new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function (res, err) {\n    var len = files.length;\n    for (var i = 0; i < len; i++) {\n      var reader = new FileReader();\n      reader.readAsDataURL(files[i]);\n      reader.onload = function (e) {\n        var image = new Image();\n        image.src = this.result;\n        res(this.result);\n      };\n    }\n  });\n}\n\n/**获取图片外网访问地址\n * 如果图片的读写权限为私有\n * client.signatureUrl(\"你的图片地址/名字\")\n 例如我的图片(名字为testImg)在根目录\n client.signatureUrl(\"testImg\");//返回的就是带加密签名的图片路径，复制这个路径到浏览器上，便可以在浏览器上访问\n\n * 如果图片的读写权限为公共\n client.getObjectUrl(\"你的图片名字\");//返回的就是不带签名的图片路径，复制路径也可以在浏览器上访问.\n */\nfunction getExtranetUrl(name, type) {\n  if (client) {\n    return type === 1 ? client.signatureUrl(name) : client.getObjectUrl(name); //1 为私有\n  }\n}\n\n//删除OSS服务器上的文件\nfunction deleteFile(name, index) {\n  return new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    client && client.delete ? client.delete(name).then(function (res) {\n      resolve(res);\n    }).catch(function (err) {\n      reject(err);\n    }) : reject({ errCode: 999, errContent: 'client is null , Please upload the file before deleting it !' });\n  });\n}\n\n\n\n/***/ }),\n\n/***/ \"zAEU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"el-upload-file\"},[_vm._m(0),_vm._v(\" \"),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"accept\":_vm.accept},on:{\"change\":_vm.changeFile}})]),_vm._v(\" \"),_vm._l((_vm.files),function(file,index){return _c('div',{key:index,staticClass:\"f-file-upload\"},[_c('div',{staticClass:\"file-upload-loading\"},[(file.isUploading)?_c('el-progress',{attrs:{\"type\":\"circle\",\"stroke-width\":6,\"percentage\":file.percentage}}):_vm._e()],1),_vm._v(\" \"),(file.uploadSuccess)?_c('div',{staticClass:\"f-file-title\"},[_c('div',{staticClass:\"f-file-success f-center\"})]):_vm._e(),_vm._v(\" \"),(!file.isUploading)?_c('div',{staticClass:\"f-file-item\"},[(!!file.type)?_c('img',{attrs:{\"src\":file.fileUrl,\"alt\":\"\"}}):_c('div',{staticClass:\"f-file-name f-center\",attrs:{\"title\":file.name}},[_vm._v(_vm._s(file.name)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"f-file-warp\"},[_c('div',{staticClass:\"f-center\",staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}},[(file.type===1)?_c('i',{staticClass:\"el-icon-zoom-in\",on:{\"click\":function($event){return _vm.lookBigImg(file,index)}}}):_vm._e(),_vm._v(\" \"),(file.uploadState===2)?_c('i',{staticClass:\"el-icon-refresh\",on:{\"click\":function($event){return _vm.fileReload(file,index)}}}):_vm._e(),_vm._v(\" \"),(file.uploadState!==1)?_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){return _vm.delFile(file,index)}}}):_vm._e()])])]):_vm._e()])}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.bigImgDialog,\"width\":\"40%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.bigImgDialog=$event}}},[_c('div',{staticClass:\"bigproimg\"},[_c('img',{staticClass:\"bigImg\",attrs:{\"src\":_vm.url,\"alt\":\"\"}})])])],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"f-plus\"},[_c('div',{staticClass:\"f-col f-center\"}),_vm._v(\" \"),_c('div',{staticClass:\"f-row f-center\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.a5c1a2726067a1d049e9.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3d331b06\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = +8CK\n// module chunks = 1","<template>\n  <div>\n    <div class=\"el-upload-file\">\n      <div class=\"f-plus\">\n        <div class=\"f-col f-center\"></div>\n        <div class=\"f-row f-center\"></div>\n      </div>\n      <input type=\"file\" @change=\"changeFile\" ref=\"file\" :accept=\"accept\"/>\n    </div>\n    <div class=\"f-file-upload\" v-for=\"(file,index) in files\" :key=\"index\">\n      <div class=\"file-upload-loading\">\n        <el-progress\n          v-if=\"file.isUploading\"\n          type=\"circle\"\n          :stroke-width=\"6\"\n          :percentage=\"file.percentage\">\n        </el-progress>\n      </div>\n      <div class=\"f-file-title\" v-if=\"file.uploadSuccess\">\n        <div class=\"f-file-success f-center\"></div>\n      </div>\n      <div class=\"f-file-item\" v-if=\"!file.isUploading\">\n        <img :src=\"file.fileUrl\" alt=\"\" v-if=\"!!file.type\">\n        <div class=\"f-file-name f-center\" v-else :title=\"file.name\">{{file.name}}\n        </div>\n        <div class=\"f-file-warp\">\n          <div class=\"f-center\" style=\"width: 100%;text-align: center;\">\n            <i v-if=\"file.type===1\" class=\"el-icon-zoom-in\" @click=\"lookBigImg(file,index)\"></i>\n            <i v-if=\"file.uploadState===2\" class=\"el-icon-refresh\" @click=\"fileReload(file,index)\"></i>\n            <i v-if=\"file.uploadState!==1\" class=\"el-icon-delete\" @click=\"delFile(file,index)\"></i>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-dialog :visible.sync=\"bigImgDialog\" width=\"40%\" center>\n      <div class=\"bigproimg\">\n        <img :src=\"url\" alt=\"\" class=\"bigImg\">\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import {upload, multipartUploadWithSts, getExtranetUrl, deleteFile} from '../plugins/oss-sdk'\n\n  export default {\n    data() {\n      return {\n        accept: '',\n        bigImgDialog: false,\n        url: '',\n        width: 126,\n        headers: {},\n        files: [],\n        fileOpt: '',\n        clientConfig: {  //OSS上传配置项信息（可选），当isNotNeedRequest为true时必填项\n          accessKeyId: '',//通过阿里云控制台创建的access key\n          accessKeySecret: '',//通过阿里云控制台创建的access secret。\n          stsToken: '',//使用临时授权方式。\n          bucket: '',// 通过控制台创建的bucket。\n          endpoint: '',//OSS域名。\n          cname: true, //是否支持上传自定义域名，默认false。如果cname为true，endpoint传入自定义域名时，自定义域名需要先同bucket进行绑定。\n          region: 'oss-cn-hangzhou', //bucket 所在的区域，默认 oss-cn-hangzhou（是根据当前所在区域自动确认的）。\n        }\n      };\n    },\n    mounted() {\n      if (this.fileList) {\n        this.files = this.fileList.map(item => {\n          return item;\n        });\n      }\n    },\n    methods: {\n      changeFile(e) {\n        const fileTemplate = {\n          isUploading: false,//文件是否正在上传\n          uploadState: 0,//文件状态 0初始状态 1上传中 2上传失败 3上传成功\n          percentage: 0,//该文件的上传进度\n          uploadSuccess: false,//该文件是否上传成功\n          fileOpt: '',//该文件的上传进度节点，上传失败时可以使用继续上传\n        }; //每一个文件包含的其他字段（可选）\n        const config = {\n          action: this.action, //获取取配置信息接口请求地址，当isNotNeedRequest为false时必传。\n          fileList: this.files,//文件列表\n          template: fileTemplate, //文件添加时的其他默认值，可自定义需要的字段\n          cb: this.progressCallback, //上传进度回调函数\n          // fileNumber: this.fileNumber,//文件限制数量 不传或者传非为不限制数量\n          // isNotNeedRequest: false,//默认为false，即需要请求接口获取配置信息，不需要时，请设置为true。\n          // clientRequest: this.clientConfig,//当isNotNeedRequest为true时必填项，配置项详情请查看OSS上传的配置项文档。https://help.aliyun.com/\n        }; //配置项\n        upload(e, config).then((resolve) => {\n          const result = resolve.data, fileList = resolve.fileList;\n          // console.log(result, this.files);\n          let filesObj = fileList.filter((item) => {\n            return item.name === result.name\n          });\n          if (filesObj.length) {\n            filesObj = filesObj[0];\n            filesObj.isUploading = false;\n            if (result.res.status === 200) {\n              console.log(result);\n              filesObj.uploadSuccess = true;\n              filesObj.uploadState = 3;\n              filesObj.address = getExtranetUrl(result.name, 1);//获取图片外网访问地址\n            } else {\n              filesObj.uploadState = 2;\n              console.error(result);\n            }\n          }\n          this.removeFile();//移除选择文件的选中状态，可以继续选择文件\n          this.$emit('upload', this.files);//传出所有的文件\n        }).catch(_ => {\n          this.removeFile();\n          if (_.uploadCode === 0) {\n            this.$message.error(_.message);\n            return;\n          } else {\n            console.error(_)\n          }\n          let filesObj = this.files.filter((item) => {\n            return item.name === _.storeAs\n          });\n          if (filesObj.length) {\n            filesObj = filesObj[0];\n            filesObj.uploadState = 2;\n            if (_.cpt) {\n              filesObj.fileOpt = _.cpt;\n            }\n          }\n        })\n      },\n      progressCallback(percent, storeAs, cpt) {//参数说明：当前上传进度的  当前上传的文件名  当前上传节点（进行重新上传时使用）\n        console.log(percent, storeAs);\n        let filesObj = this.files.filter((item) => {\n          return item.name === storeAs\n        });\n        if (filesObj.length) {\n          filesObj = filesObj[0];\n          filesObj.isUploading = true;\n          filesObj.uploadState = 1;\n          filesObj.percentage = Math.round(percent * 10000) / 100;\n        }\n      },\n      lookBigImg(file, index) {//查看图片大图\n        this.url = file.fileUrl;\n        this.bigImgDialog = true;\n      },\n      delFile(file, index) {//删除OSS服务器上的文件\n        deleteFile(file.name).then((res) => {\n          this.files.splice(index, 1);\n          this.removeFile();//移除选择文件的选中状态，可以继续选择文件\n          this.$emit('deleteFile', this.files, this.client);\n        }).catch((err) => {\n          if (err.errCode === 999) {//该状态为文件没有上传成功，可以直接在本地删除\n            this.files.splice(index, 1);\n            console.warn(err)\n          } else {\n            console.error(err)\n          }\n          this.$emit('deleteFile', this.files, this.client);\n        });\n      },\n      removeFile() {//移除选择文件的选中状态，可以继续选择文件\n        let fileObj = this.$refs['file'];\n        if (fileObj) {\n          fileObj.value = '';\n        }\n      },\n      downloadFile(name) {//下载文件\n        let url;\n        if (this.client) {\n          url = getExtranetUrl(name, 1);//获取图片外网访问地址\n          window.open(url, name);\n        } else {\n          this.$message.error('获取下载地址失败！');\n        }\n      },\n      fileReload(item, index) {\n        new Promise((resolve, reject) => {\n          let uploadConfig = {\n            action: this.action,//请求地址\n            resolve: resolve,//Promise(成功的返回)\n            reject: reject,// Promise(失败的返回)\n            progressCb: this.progressCallback,//上传进度回调函数\n            // isNotNeedRequest: false,//默认为false，即需要请求接口获取配置信息，不需要时，请设置为true。\n            // clientRequest: this.clientConfig,//当isNotNeedRequest为true时必填项，配置项详情请查看OSS上传的配置项文档。https://help.aliyun.com/\n          };\n          item.fileOpt && (uploadConfig.cpt = item.fileOpt);//如果该文件有上传进度节点，则重新上传。\n          multipartUploadWithSts(item.name, item.target, uploadConfig);//参数说明：文件名；文件；配置对象\n        }).then((res) => {\n          console.log(res)\n        }).catch(_ => {\n          console.log(_);\n          this.removeFile();\n          let filesObj = this.files.filter((item) => {\n            return item.name === _.storeAs\n          });\n          if (filesObj.length) {\n            filesObj = filesObj[0];\n            filesObj.uploadState = 2;\n            if (_.cpt) {\n              filesObj.fileOpt = _.cpt;\n            }\n          }\n        });\n      },\n    },\n    props: {\n      action: {\n        type: String,\n      },\n      fileList: {\n        type: Array,\n      },\n      fileNumber: {\n        type: Number,\n      }\n    },\n    watch: {\n      fileList: {\n        handler(val) {\n          if (val) {\n            this.files = val.map(item => {\n              return item;\n            });\n          }\n        },\n        immediate: true\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .info {\n    margin-top: 20px;\n    li {\n      margin-bottom: 10px;\n    }\n  }\n\n  body {\n    background-color: #eee;\n  }\n\n  .f-center {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  .el-upload-file {\n    display: inline-block;\n    width: 126px;\n    height: 126px;\n    border: 2px dashed #c0c4cc;\n    position: relative;\n    margin-top: 10px;\n    margin-right: 20px;\n    text-align: center;\n    i {\n      line-height: 126px;\n      font-size: 40px;\n      color: #c0c4cc;\n    }\n    input {\n      position: absolute;\n      width: 126px;\n      height: 126px;\n      left: 0;\n      top: 0;\n      opacity: 0;\n    }\n    .f-plus {\n      position: relative;\n      width: 100%;\n      height: 100%;\n      .f-col {\n        width: 30%;\n        height: 2px;\n        background: #c0c4cc;\n      }\n      .f-row {\n        height: 30%;\n        width: 2px;\n        background: #c0c4cc;\n      }\n    }\n  }\n\n  .el-upload-file:hover {\n    border-color: #16B8BD;\n    color: #16b8bd;\n  }\n\n  .info-item {\n    word-break: break-all;\n    cursor: pointer;\n    > span {\n      line-height: 32px;\n    }\n    .el-icon-download {\n      font-size: 18px;\n      margin-left: 10px;\n      margin-top: 2px;\n    }\n  }\n\n  .f-file-upload {\n    width: 129px;\n    height: 129px;\n    display: inline-block;\n    position: relative;\n    border-radius: 5px;\n    border: 2px solid #e5e5e5;\n    box-sizing: border-box;\n    overflow: hidden;\n    .file-upload-loading {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      z-index: 1;\n    }\n    .f-file-title {\n      position: absolute;\n      right: -15px;\n      top: -6px;\n      width: 40px;\n      height: 24px;\n      background: #13ce66;\n      text-align: center;\n      transform: rotate(45deg);\n      box-shadow: 0 0 1pc 1px rgba(0, 0, 0, .2);\n      z-index: 100;\n    }\n    .f-file-success {\n      position: absolute;\n      left: 36%;\n      top: 54%;\n      width: 8px;\n      height: 4px;\n      border-left: 2px solid;\n      border-bottom: 2px solid;\n      transform: rotate(-90deg);\n      border-color: #fff;\n    }\n    .f-file-item {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 20;\n      background: rgba(0, 0, 0, 0.5);\n      img {\n        width: 100%;\n        height: 100%;\n      }\n      .f-file-name {\n        width: 90%;\n        max-height: 90%;\n        font-size: 12px;\n        text-align: center;\n        word-break: break-all;\n        color: #fff;\n      }\n      .f-file-warp {\n        position: absolute;\n        left: 0;\n        top: 0;\n        display: none;\n        width: 100%;\n        height: 100%;\n        z-index: 100;\n        background: rgba(0, 0, 0, 0.5);\n        font-size: 18px;\n        color: #fff;\n        > div {\n          > i {\n            cursor: pointer;\n          }\n        }\n      }\n    }\n  }\n\n  .f-file-upload:hover {\n    .f-file-title {\n      display: none;\n    }\n    .f-file-item .f-file-warp {\n      display: block;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/oss-upload.vue","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cd8c0f14\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./oss-upload.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./oss-upload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./oss-upload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cd8c0f14\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./oss-upload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cd8c0f14\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/oss-upload.vue\n// module id = 8jQz\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d331b06\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d331b06\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport ElementUI from 'element-ui'\nimport VueClipboard from 'vue-clipboard2'\n\nVue.use(ElementUI)\nVue.use(VueClipboard)\nwindow.Promise = Promise;\n\n\nrouter.beforeEach((to, from, next) => {\n  next()\n})\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App),\n  template: '<App/>',\n  components: { App },\n\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1474cbce\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./upload-index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./upload-index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./upload-index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1474cbce\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./upload-index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1474cbce\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/upload-index.vue\n// module id = RTAW\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport upload from '@/view/upload-index'\n\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'upload',\n      component: upload,\n      hidden: true,\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"图片上传：\")]),_vm._v(\" \"),_c('oss-upload',{attrs:{\"action\":\"http://192.168.0.154:7080/\"},on:{\"deleteFile\":_vm.getFiles,\"upload\":_vm.getFiles}}),_vm._v(\" \"),_c('ul',{staticClass:\"info\"},_vm._l((_vm.files),function(item,index){return (item.address)?_c('li',{directives:[{name:\"clipboard\",rawName:\"v-clipboard:copy\",value:(_vm.getUrl(item.name,1)),expression:\"getUrl(item.name,1)\",arg:\"copy\"},{name:\"clipboard\",rawName:\"v-clipboard:success\",value:(_vm.onCopy),expression:\"onCopy\",arg:\"success\"},{name:\"clipboard\",rawName:\"v-clipboard:error\",value:(_vm.onError),expression:\"onError\",arg:\"error\"}],key:index,staticClass:\"info-item\"},[_c('span',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-download\",on:{\"click\":function($event){$event.stopPropagation();return _vm.downloadFile(item.name)}}})]):_vm._e()}),0)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1474cbce\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/view/upload-index.vue\n// module id = gVwO\n// module chunks = 1","<template>\n  <div class=\"wrap\">\n    <div class=\"title\">图片上传：</div>\n    <oss-upload action=\"http://192.168.0.154:7080/\" @deleteFile=\"getFiles\" @upload=\"getFiles\"></oss-upload>\n    <ul class=\"info\">\n      <li v-for=\"(item,index) in files\" :key=\"index\" v-if=\"item.address\" v-clipboard:copy=\"getUrl(item.name,1)\"\n          v-clipboard:success=\"onCopy\" v-clipboard:error=\"onError\" class=\"info-item\">\n        <span>{{item.name}}</span>\n        <!--<a class=\"el-icon-download icon\" :href=\"downloadFile(item.name)\" :download=\"item.name\"></a>-->\n        <i class=\"el-icon-download\" @click.stop=\"downloadFile(item.name)\"></i>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\n  import {getExtranetUrl} from '../plugins/oss-sdk'\n  import ossUpload from './oss-upload'\n\n  export default {\n    data() {\n      return {\n        files: [],\n        client: '',\n      };\n    },\n    mounted() {\n    },\n    methods: {\n      getFiles(list, client) {\n        this.client = client ? client : '';\n        this.files = list ? list : [];\n      },\n      onCopy(e) {\n        this.$message({\n          message: '复制成功',\n          type: 'success'\n        });\n      },\n      onError(e) {\n        this.$message.error('复制失败');\n      },\n      getUrl(name, type) {\n        return getExtranetUrl(name, type)\n      },\n      downloadFile(name) {//下载文件\n        let url;\n        if (name) {\n          url = getExtranetUrl(name, 1);\n          window.open(url, name);\n        } else {\n          this.$message.error('获取下载地址失败！');\n        }\n        // return url;\n      },\n    },\n    components: {\n      ossUpload\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .wrap {\n    margin: 50px;\n    border: 1px solid #ccc;\n    border-radius: 10px;\n    padding: 40px;\n    background-color: #fff;\n  }\n\n  .title {\n    margin-bottom: 10px;\n  }\n\n  .el-upload-list__item {\n    img {\n      object-fit: contain;\n    }\n  }\n\n  .info {\n    margin-top: 20px;\n    li {\n      margin-bottom: 10px;\n    }\n  }\n\n  body {\n    background-color: #eee;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/upload-index.vue","<template>\r\n  <div id=\"app\">\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'app'\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"assets/css/reset.scss\";\r\n\r\nbody{\r\n\twidth:100%;\r\n\theight:100%;\r\n\r\n}\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","const OSS = require('ali-oss');\nlet files = [];\nlet client = '', fileName = '';\nlet isNotNeedRequest = false;\nlet notNeedClientRequest = '';\nwindow.Promise = Promise;\n\n//获取OSS上传必须的秘钥及其他设置信息 （注意：如果拥有上传必备的秘钥以及其他配置信息，可以跳过本操作）\nfunction multipartUploadWithSts(storeAs, file, uploadConfig) {//参数说明：文件名；文件；配置对象\n  let action = uploadConfig.action;//请求地址\n  if (uploadConfig.isNotNeedRequest && uploadConfig.clientRequest) {\n    try {\n      client = new OSS(uploadConfig.clientRequest);//初始化OSS对象\n      multitest(client, storeAs, file, uploadConfig);//使用OSS上传文件\n    } catch (e) {\n      uploadConfig.reject({err: e, storeAs: storeAs});\n    }\n    return\n  } else if (!action) {\n    uploadConfig.reject({\n      uploadCode: 0,\n      message: `如果要请求获取配置接口，请给定接口地址！`,\n      storeAs: storeAs\n    });\n  }\n  OSS.urllib.request(action, {\n    method: 'GET',\n  }, (err, response) => {\n    let result, errmsg;\n    if (err) {\n      uploadConfig.reject({err: err, storeAs: storeAs});\n      return console.error(err);\n    }\n    try {\n      result = JSON.parse(response);\n    } catch (e) {\n      errmsg = 'parse sts response info error: ' + e.message;\n      uploadConfig.reject({err: e, storeAs: storeAs});\n      return console.error(errmsg);\n    }\n    let clientRequest = {\n      accessKeyId: result.AccessKeyId,//通过阿里云控制台创建的access key\n      accessKeySecret: result.AccessKeySecret,//通过阿里云控制台创建的access secret。\n      stsToken: result.SecurityToken,//使用临时授权方式。\n      bucket: 'park-static',// 通过控制台创建的bucket。\n      endpoint: 'oss.zhihuipk.com',//OSS域名。\n      cname: true,\n      region: 'oss-cn-hangzhou',\n    };\n    //上传前的准备\n    try {\n      client = new OSS(clientRequest);//初始化OSS对象\n      multitest(client, storeAs, file, uploadConfig);//使用OSS上传文件\n    } catch (e) {\n      uploadConfig.reject({err: e, storeAs: storeAs});\n    }\n  });\n}\n\n//使用OSS上传文件\nfunction multitest(ossClient, storeAs, file, multitestConfig) {//参数说明：oss对象；文件名；文件；配置对象\n  let checkpoint_temp,//当前节点（重新上传时需要）\n    cpt = multitestConfig.cpt,//上一个节点（重新上传时需要）\n    progressCb = multitestConfig.progressCb;//上传进度回调函数\n  if (cpt) {\n    //如果有断点则继续上一个节点上传该文件\n    console.log(\"multitest with cpt\", cpt);\n    ossClient.multipartUpload(storeAs, file, {\n      parallel: 2,\n      checkpoint: cpt,\n      //进度回调函数\n      progress: async function (percent, storeAs, cpt) {//参数说明：当前上传进度的；当前上传的文件名；当前上传节点（进行重新上传时使用）\n        progressCb && progressCb(percent, storeAs, cpt);\n        checkpoint_temp = cpt;\n      }\n    }).then((result) => {//成功的返回\n      multitestConfig.resolve({\n        data: result,\n        fileList: files,\n      });\n    }).catch((err) => {//失败的返回\n      let errObj = {err: err, storeAs: storeAs};\n      (checkpoint_temp !== undefined && checkpoint_temp !== null) && (errObj.cpt = checkpoint_temp);\n      multitestConfig.reject(errObj);//将当前节点返回，使其可以重新从该节点继续上传文件\n    });\n  } else {\n    console.log(\"multitest without cpt\");\n    ossClient.multipartUpload(storeAs, file, {\n      parallel: 2,\n      //进度回调函数\n      progress: async function (percent, cpt) {//参数说明：当前上传进度的；当前上传的文件名；当前上传节点（进行重新上传时使用）\n        progressCb && progressCb(percent, storeAs, cpt);\n        checkpoint_temp = cpt;\n      }\n    }).then((result) => {//成功的返回\n      multitestConfig.resolve({\n        data: result,\n        fileList: files,\n      });\n    }).catch((err) => {//失败的返回\n      let errObj = {err: err, storeAs: storeAs};\n      (checkpoint_temp !== undefined && checkpoint_temp !== null) && (errObj.cpt = checkpoint_temp);\n      multitestConfig.reject(errObj);//将当前节点返回，使其可以重新从该节点继续上传文件\n    });\n  }\n}\n\n//获取选中的文件\nfunction upload(e, config) {\n  files = config.fileList ? config.fileList : [];//当前文件列表\n  let fileNumber = config.fileNumber,//文件限制数量\n    action = config.action,//请求地址\n    template = config.template,//文件添加时的其他默认值\n    cb = config.cb;//文件上传时的回调函数\n  isNotNeedRequest = !!config.isNotNeedRequest;//默认为false，即需要请求接口获取配置信息，不需要时，请设置为true。\n  let fileTemplate = (template && template.constructor === Object) ? template : {},\n    progressCb = (cb && cb.constructor === Function) ? cb : '';\n  return new Promise((resolve, reject) => {\n    const target = e.target.files || e.dataTransfer.files;\n    let file = target[0];//文件\n    let storeAs = file.name;//文件名\n    fileName = storeAs;//文件名\n    let fileType = ['image/png', 'image/jpeg ', 'image/jpg', 'image/gif'].indexOf(file.type) > -1;//获取文件类型\n    let hasFile = files.filter((item) => {\n      return item.name === storeAs\n    });//查找该文件\n    if (isNotNeedRequest) {\n      notNeedClientRequest = config.clientRequest;//获取OSS上传配置项\n      if (!notNeedClientRequest) {\n        reject({\n          uploadCode: 0,\n          message: `如果不需要请求获取配置接口，请给定规范的配置对象！详情请查看OSS文档`,\n        });\n        return\n      }\n    }\n    if (fileNumber && fileNumber <= files.length) {//文件限制数量\n      reject({\n        uploadCode: 0,\n        message: `最大上传${fileNumber}个文件！`,\n      });\n      return\n    }\n    if (hasFile.length) {//如果本次已经上传了该文件则提示\n      reject({\n        uploadCode: 0,\n        message: '该文件已经上传过了',\n      });\n      console.warning('该文件已经上传过了');\n    } else {\n      //上传配置项\n      const uploadConfig = {\n        action: action,//请求地址\n        resolve: resolve,//Promise(成功的返回)\n        reject: reject,// Promise(失败的返回)\n        progressCb: progressCb,//上传进度回调函数\n      };\n      if (fileType) {//如果该文件是图片格式，则使先转换成base64\n        getImgUrl(target).then(res => {\n          if (fileNumber === 1) {\n            config.fileList ? config.fileList = [] : files = [];\n          }\n          files.push(Object.assign(fileTemplate, {\n            target: target[0],//文件\n            name: storeAs,//文件名\n            type: 1,//文件格式为图片\n            fileUrl: res,//该文件的图片base64\n            address: '',//该文件的OSS地址\n          }));\n          //是否请求接口获取配置信息\n          if (isNotNeedRequest) {\n            try {\n              client = new OSS(notNeedClientRequest);//初始化OSS对象\n              multitest(client, storeAs, file, uploadConfig);//使用OSS上传文件\n            } catch (e) {\n              uploadConfig.reject({err: e, storeAs: storeAs});\n            }\n          } else {\n            multipartUploadWithSts(storeAs, file, uploadConfig);//获取OSS上传必须的秘钥及其他设置信息\n          }\n        });\n      } else {\n        if (fileNumber === 1) {\n          config.fileList ? config.fileList = [] : files = [];\n        }\n        files.push(Object.assign(fileTemplate, {\n          target: target[0],//文件\n          name: storeAs,//文件名\n          type: 0,//文件格式为其他类型的文件\n          address: '',//该文件的OSS地址\n        }));\n        //是否请求接口获取配置信息\n        if (isNotNeedRequest) {\n          try {\n            client = new OSS(notNeedClientRequest);//初始化OSS对象\n            multitest(client, storeAs, file, uploadConfig);//使用OSS上传文件\n          } catch (e) {\n            uploadConfig.reject({err: e, storeAs: storeAs});\n          }\n        } else {\n          multipartUploadWithSts(storeAs, file, uploadConfig);//获取OSS上传必须的秘钥及其他设置信息\n        }\n      }\n    }\n  });\n}\n\n//获取图片base64\nfunction getImgUrl(files) {\n  return new Promise((res, err) => {\n    const len = files.length;\n    for (let i = 0; i < len; i++) {\n      let reader = new FileReader();\n      reader.readAsDataURL(files[i]);\n      reader.onload = function (e) {\n        let image = new Image();\n        image.src = this.result;\n        res(this.result);\n      };\n    }\n  })\n}\n\n/**获取图片外网访问地址\n * 如果图片的读写权限为私有\n * client.signatureUrl(\"你的图片地址/名字\")\n 例如我的图片(名字为testImg)在根目录\n client.signatureUrl(\"testImg\");//返回的就是带加密签名的图片路径，复制这个路径到浏览器上，便可以在浏览器上访问\n\n * 如果图片的读写权限为公共\n client.getObjectUrl(\"你的图片名字\");//返回的就是不带签名的图片路径，复制路径也可以在浏览器上访问.\n */\nfunction getExtranetUrl(name, type) {\n  if (client) {\n    return type === 1 ? client.signatureUrl(name) : client.getObjectUrl(name);//1 为私有\n  }\n}\n\n//删除OSS服务器上的文件\nfunction deleteFile(name, index) {\n  return new Promise((resolve, reject) => {\n    (client && client.delete) ? client.delete(name).then((res) => {\n      resolve(res)\n    }).catch((err) => {\n      reject(err);\n    }) : (reject({errCode: 999, errContent: 'client is null , Please upload the file before deleting it !'}));\n  })\n}\n\nexport {\n  upload, getExtranetUrl, multipartUploadWithSts, multitest, deleteFile\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/oss-sdk.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"el-upload-file\"},[_vm._m(0),_vm._v(\" \"),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"accept\":_vm.accept},on:{\"change\":_vm.changeFile}})]),_vm._v(\" \"),_vm._l((_vm.files),function(file,index){return _c('div',{key:index,staticClass:\"f-file-upload\"},[_c('div',{staticClass:\"file-upload-loading\"},[(file.isUploading)?_c('el-progress',{attrs:{\"type\":\"circle\",\"stroke-width\":6,\"percentage\":file.percentage}}):_vm._e()],1),_vm._v(\" \"),(file.uploadSuccess)?_c('div',{staticClass:\"f-file-title\"},[_c('div',{staticClass:\"f-file-success f-center\"})]):_vm._e(),_vm._v(\" \"),(!file.isUploading)?_c('div',{staticClass:\"f-file-item\"},[(!!file.type)?_c('img',{attrs:{\"src\":file.fileUrl,\"alt\":\"\"}}):_c('div',{staticClass:\"f-file-name f-center\",attrs:{\"title\":file.name}},[_vm._v(_vm._s(file.name)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"f-file-warp\"},[_c('div',{staticClass:\"f-center\",staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}},[(file.type===1)?_c('i',{staticClass:\"el-icon-zoom-in\",on:{\"click\":function($event){return _vm.lookBigImg(file,index)}}}):_vm._e(),_vm._v(\" \"),(file.uploadState===2)?_c('i',{staticClass:\"el-icon-refresh\",on:{\"click\":function($event){return _vm.fileReload(file,index)}}}):_vm._e(),_vm._v(\" \"),(file.uploadState!==1)?_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){return _vm.delFile(file,index)}}}):_vm._e()])])]):_vm._e()])}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.bigImgDialog,\"width\":\"40%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.bigImgDialog=$event}}},[_c('div',{staticClass:\"bigproimg\"},[_c('img',{staticClass:\"bigImg\",attrs:{\"src\":_vm.url,\"alt\":\"\"}})])])],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"f-plus\"},[_c('div',{staticClass:\"f-col f-center\"}),_vm._v(\" \"),_c('div',{staticClass:\"f-row f-center\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-cd8c0f14\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/view/oss-upload.vue\n// module id = zAEU\n// module chunks = 1"],"sourceRoot":""}